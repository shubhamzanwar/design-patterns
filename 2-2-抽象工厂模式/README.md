# æŠ½è±¡å·¥å‚æ¨¡å¼ ğŸ­

æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹çš„è®¾è®¡æ¨¡å¼ã€‚å½“æˆ‘ä»¬éœ€è¦åˆ›å»ºå¤šä¸ªç±»ä¼¼äº§å“å®¶æ—æ—¶ï¼Œå°±ä¼šä½¿ç”¨å®ƒã€‚
è®©æˆ‘ä»¬ä»¥æŠ«è¨è¿é”åº—ä¸ºä¾‹æ¥ç†è§£è¿™ç§æ¨¡å¼ã€‚

### æŠ«è¨åº—

å‡è®¾ä½ æ˜¯ä¸€å®¶åœ¨é•‡ä¸Šå¼€æŠ«è¨åº—çš„è€æ¿ã€‚å…¶ä¸­ä¸€é¡¹èŒè´£æ˜¯ä¿è¯æŸå®¶åº—çš„æ‰€æœ‰é£Ÿå“(åœ¨æœ¬ä¾‹ä¸­æ˜¯æŠ«è¨å’Œè’œè“‰é¢åŒ…)å±äºåŒä¸€ä¸ªå“ç‰Œâ€”â€”è¦ä¹ˆæ˜¯è¾¾ç¾ä¹æ¯”è¨ï¼Œè¦ä¹ˆæ˜¯å¿…èƒœå®¢ã€‚

æœ‰å¾ˆå¤šç§æ–¹æ³•å¯ä»¥åšåˆ°ã€‚æƒ³åˆ°çš„æœ€ç®€å•çš„æ–¹æ³•ä¹‹ä¸€æ˜¯åˆ›å»ºä¸€ä¸ªå·¥å‚æ¥ç”Ÿäº§å¿…èƒœå®¢æˆ–è¾¾ç¾ä¹ç±»å‹çš„æŠ«è¨ï¼Œä»¥åŠå¦ä¸€ä¸ªç±»ä¼¼çš„å·¥å‚æ¥ç”Ÿäº§å¤§è’œé¢åŒ…ã€‚

> æ³¨:å¦‚æœä½ ä¸ç¡®å®šæ­£å¸¸çš„å·¥å‚æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Œä½ å¯ä»¥å»çœ‹çœ‹[è¿™ä¸ªä¾‹å­](https://github.com/coolbook/design-patterns/tree/master/1-1-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F)

æ‹¥æœ‰ç‹¬ç«‹å·¥å‚çš„ç¼ºç‚¹æ˜¯ï¼Œç°åœ¨æˆ‘ä»¬ç›¸ä¿¡ï¼Œåœ¨ç»™å®šçš„å•†åº—é‡Œï¼Œç”¨æˆ·ä¼šé€‰æ‹©ä»–ä»¬æƒ³è¦çš„æ­£ç¡®ç±»å‹çš„æŠ«è¨å’Œè’œè“‰é¢åŒ…ã€‚å¦‚æœä»–ä»¬çŠ¯äº†ä¸€ä¸ªé”™è¯¯ï¼ŒæŠŠè¾¾ç¾ä¹æŠ«è¨å’Œå¿…èƒœå®¢è’œè“‰é¢åŒ…æ”¾åœ¨ä¸€èµ·ä¾›åº”ï¼Œä½ çš„é¡¾å®¢ä¼šå¾ˆç”Ÿæ°”ï¼Œä½ ä¹Ÿè¿åäº†ä½ ä¸è¿™äº›è¿é”åº—ç­¾è®¢çš„åˆåŒã€‚

åˆ«æ‹…å¿ƒã€‚ **_æœ‰ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•_**

ä½ å¯ä»¥ä¸ºæ¯ä¸ªå•ç‹¬çš„å“ç‰Œåˆ›å»ºä¸€ä¸ªå·¥å‚ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªå•ç‹¬çš„äº§å“(æŠ«è¨å’Œå¤§è’œé¢åŒ…)åˆ›å»ºä¸€ä¸ªå·¥å‚ã€‚å¼ºåˆ¶è¿™äº›å·¥å‚æä¾›â€œåˆ¶ä½œæŠ«è¨â€å’Œâ€œåˆ¶ä½œè’œè“‰é¢åŒ…â€çš„æ¡æ¬¾ã€‚

ç„¶åï¼Œåœ¨å»ºç«‹å•†åº—æ—¶ï¼Œä½ å¯ä»¥ç»™å•†åº—ç»ç†ä¸€ä¸ªå¿…èƒœå®¢å·¥å‚æˆ–è¾¾ç¾ä¹å·¥å‚ï¼Œç„¶åè‡ªä¿¡åœ°ç›¸ä¿¡ä»–ä»¬ä¸ä¼šä¸å°å¿ƒæ··åˆæ­é…äº§å“ã€‚

è®©æˆ‘ä»¬æŠŠå®ƒè½¬æ¢æˆä»£ç :

åœ¨æˆ‘ä»¬å¼€å§‹ç¼–å†™å·¥å‚ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆåˆ›å»ºäº§å“:

##### é€šç”¨çš„æŠ«è¨

```go
type iPizza interface {
    GetPrice() float64
    GetName() string
    GetToppings() []string
}

type pizza struct {
    name     string
    price    float64
    toppings []string
}

func (p *pizza) GetName() string {
    return p.name
}

func (p *pizza) GetPrice() float64 {
    return p.price
}

func (p *pizza) GetToppings() []string {
    return p.toppings
}
```

##### å“ç‰Œçš„æŠ«è¨

```go
type pizzaHutPizza struct {
    pizza
}

type dominosPizza struct {
    pizza
}
```

##### é€šç”¨çš„è’œè“‰é¢åŒ…

```go
type iGarlicBread interface {
    GetPrice() float64
    GetName() string
}

type garlicBread struct {
    name  string
    price float64
}

func (g *garlicBread) GetName() string {
    return g.name
}

func (g *garlicBread) GetPrice() float64 {
    return g.price
}
```

##### å“ç‰Œçš„è’œè“‰é¢åŒ…

```go
type pizzaHutGarlicBread struct {
    garlicBread
}

type dominosGarlicBread struct {
    garlicBread
}
```

æˆ‘ä»¬åˆ›é€ äº†è¿™ä¸¤ç§äº§å“ã€‚å®ƒä»¬éƒ½å®ç°äº†ä¸€ä¸ªå…¬å…±æ¥å£ï¼Œä½¿å¾—æœ€ç»ˆç”¨æˆ·æ›´å®¹æ˜“ä½¿ç”¨å®ƒä»¬ã€‚åŒå…³è¯­ ğŸ˜‰

ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä¸ºè¿™äº›äº§å“åˆ›å»ºå·¥å‚:

##### é€šç”¨å·¥å‚

```go
type iPizzaFactory interface {
    createPizza() iPizza
    createGarlicBread() iGarlicBread
}
```

ç°åœ¨ï¼Œ`PizzaHutFactory `å’Œ`DominosFactory`éƒ½å¯ä»¥å®ç°è¿™ä¸ªæ¥å£ï¼Œä»¥ç¡®ä¿å®ƒä»¬å…¬å¼€ç»Ÿä¸€çš„åŠŸèƒ½

##### å“ç‰Œå·¥å‚

```go
type PizzaHutFactory struct {}

func (p *PizzaHutFactory) createPizza() iPizza {
    return &pizzaHutPizza{
        pizza{
            name:     "pepperoni",
            price:    230.3,
            toppings: []string{"olives", "mozzarella", "pork"},
        },
    }
}

func (p *pizzaHutFactory) createGarlicBread() iGarlicBread {
    return &pizzaHutGarlicBread{
        garlicBread{
            name:  "garlic bread",
            price: 180.99,
        },
    }
}
```

```go
type dominosFactory struct{}

func (d *dominosFactory) createPizza() iPizza {
    return &dominosPizza{
        pizza{
            name:     "margherita",
            price:    200.5,
            toppings: []string{"tomatoes", "basil", "olive oil"},
        },
    }
}

func (d *dominosFactory) createGarlicBread() iGarlicBread {
    return &dominosGarlicBread{
        garlicBread{
            name:  "cheesy bread sticks",
            price: 150.00,
        },
    }
}
```

ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸¤å®¶å·¥å‚ä¸­ä»»é€‰ä¸€å®¶ï¼Œç„¶åç»§ç»­ç”Ÿäº§æŠ«è¨æˆ–è’œè“‰é¢åŒ…ï¼Œè€Œä¸”ç»å¯¹å¯ä»¥ç¡®ä¿ä¸€å®¶å·¥å‚ç”Ÿäº§çš„ä»»ä½•äº§å“éƒ½å±äºåŒä¸€ä¸ªå®¶æ—/å“ç‰Œã€‚

**_æˆ‘ä»¬å°±å¿«å®Œæˆäº†_**ã€‚è®©æˆ‘ä»¬é€šè¿‡åˆ›å»ºä¸€ä¸ªå°†è¿”å›æˆ‘ä»¬æ‰€é€‰æ‹©çš„å·¥å‚çš„å·¥å‚æ¥ç»“æŸå®ƒã€‚å›°æƒ‘å—?ğŸ¤¯èŠ±ä¸€åˆ†é’Ÿæ—¶é—´å†è¯»ä¸€éè¿™ä¸ªå¥å­ ğŸ˜‹

åŸºæœ¬ä¸Šï¼ŒæŠŠæˆ‘ä»¬çš„å·¥å‚æƒ³è±¡æˆå¦ä¸€ä¸ªå¯¹è±¡ã€‚ç°åœ¨ï¼Œæ ¹æ®æˆ‘ä»¬æƒ³è¦å»ºç«‹çš„ç±»å‹æˆ–æ¯”è¨é¥¼åº—(å¿…èƒœå®¢æˆ–è¾¾ç¾ä¹)ï¼Œæˆ‘ä»¬å¯ä»¥è¯·æ±‚ç‰¹å®šçš„å·¥å‚(åªæ˜¯å¦ä¸€ä¸ªå¯¹è±¡)ã€‚ä¸ºäº†è‡ªåŠ¨è·å–è¿™äº›â€œå¯¹è±¡â€ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå¦ä¸€ä¸ªå·¥å‚ï¼Œè¯¥å·¥å‚å°†è¿”å›è¿™äº›å¯¹è±¡ä¸­çš„ä¸€ä¸ªã€‚

ä¸€äº›ä»£ç å¯ä»¥å¸®åŠ©ä½ :

##### å·¥å‚çš„å·¥å‚

```go
func getPizzaFactory(chain string) (iPizzaFactory, error) {
    if chain == "P" {
        return &pizzaHutFactory{}, nil
    }
    if chain == "D" {
        return &dominosFactory{}, nil
    }
    return nil, fmt.Errorf("Enter a valid chain type next time")
}
```

ä¹Ÿè®¸è¿™æ ·æ›´æœ‰æ„ä¹‰ ğŸ’¡ğŸ˜

è¦è®°ä½çš„è¦ç‚¹æ˜¯:æŠ½è±¡å·¥å‚æ¨¡å¼å®ç°äº†å·¥å‚çš„å·¥å‚ã€‚è¿™äº›å†…éƒ¨å·¥å‚å¯ä»¥ç”¨æ¥åˆ¶é€ å±äºç‰¹å®šç§ç±»çš„äº§å“ã€‚
